<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>KRATORQ 2025 - Events</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;900&display=swap" rel="stylesheet">
  <style>
    * {box-sizing:border-box;margin:0;padding:0}
    html,body {height:100%;overflow-x:hidden}
    body {
      font-family:'Poppins',sans-serif;
      background: url('Images/Background2.jpg') no-repeat center center fixed;
      background-size: cover;
      color:#fff;
      overflow-y:auto;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    body::before{
      content:"";
      position:fixed;inset:0;background:rgba(6,0,10,0.65);z-index:-2;
    }

    header {
      text-align:center;
      padding:3rem 1rem 2rem;
      z-index:100;
      position:relative;
      pointer-events:none;
      background: linear-gradient(180deg, rgba(20,0,30,0.8), rgba(0,0,0,0));
      border-bottom: 2px solid rgba(255,60,60,0.3);
      box-shadow: 0 4px 30px rgba(255,0,60,0.2);
    }
    header h1 {
      font-size:3.5rem;
      font-weight:900;
      color:#ff3b3b;
      text-shadow:
        0 0 20px rgba(255,0,60,0.6),
        0 0 40px rgba(255,0,60,0.4),
        0 8px 30px rgba(0,0,0,0.8);
      margin-bottom:0.8rem;
      letter-spacing:3px;
      background: linear-gradient(135deg, #ff3b3b, #ff8a8a, #ff3b3b);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: headerGlow 3s ease-in-out infinite;
    }
    @keyframes headerGlow {
      0%, 100% { text-shadow: 0 0 20px rgba(255,0,60,0.6), 0 0 40px rgba(255,0,60,0.4); }
      50% { text-shadow: 0 0 30px rgba(255,0,60,0.9), 0 0 60px rgba(255,0,60,0.6); }
    }
    header p {
      color:#ffd5d8;
      font-size:1.3rem;
      font-weight:300;
      letter-spacing:1.5px;
      text-shadow: 0 2px 10px rgba(0,0,0,0.7);
      max-width:700px;
      margin:0 auto;
    }

    .scene-wrap {
      position:relative;
      padding:3rem 1rem 4rem;
      max-width:1600px;
      margin:0 auto;
      z-index:4;
      perspective:1800px;
      min-height:85vh;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
    }

    .carousel {
      position:relative;
      width:100%;
      max-width:1200px;
      height:700px;
      display:flex;
      align-items:center;
      justify-content:center;
      transform-style:preserve-3d;
      user-select:none;
      margin:0 auto;
    }

    .event-card {
      position:absolute;
      width:380px;
      height:620px;
      transform-style:preserve-3d;
      transition:transform 0.9s cubic-bezier(.2,.9,.2,1);
      border-radius:20px;
      overflow:hidden;
      box-shadow:0 30px 80px rgba(0,0,0,0.7);
      background:linear-gradient(180deg, rgba(20,0,30,0.95), rgba(8,0,18,0.92));
      border:2px solid rgba(255,0,60,0.15);
      -webkit-backface-visibility:hidden;
      backface-visibility:hidden;
      will-change:transform,opacity;
      pointer-events:none;
      opacity:0.3;
    }
    .event-card.active { 
      opacity:1; 
      pointer-events:auto; 
      z-index:50;
    }
    
    .card-inner {
      width:100%;
      height:100%;
      position:relative;
      border-radius:18px;
      overflow:hidden;
      background:rgba(0,0,0,0.1);
    }

    .card-face { 
      position:absolute; 
      inset:0; 
      backface-visibility:hidden; 
      display:flex; 
      flex-direction:column; 
      align-items:stretch; 
      justify-content:flex-start;
    }
    .card-front { padding:0; background:transparent }

    .poster {
      width:100%;
      height:70%;
      background:#0b0710;
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
      overflow:hidden;
      border-bottom:3px solid #ff3b3b;
      cursor:pointer;
    }

    .poster img {
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      transform-origin:center;
      opacity:0;
      transition:opacity 0.6s ease-out, transform 0.3s ease;
    }
    
    .poster img.loaded {
      opacity:1 !important;
    }
    
    .poster:hover img {
      transform:scale(1.05);
    }

    .poster-title {
      position:absolute;
      left:0;right:0;bottom:0;
      padding:1rem 1.25rem;
      background:linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,0.85));
      color:#fff;
      font-weight:700;
      font-size:1.1rem;
      text-align:center;
      letter-spacing:0.5px;
      z-index:10;
      text-shadow:0 2px 8px rgba(0,0,0,0.8);
      pointer-events:none;
    }

    .flame-aura {
      position:absolute;
      inset:5%;
      pointer-events:none;
      border-radius:12px;
      mix-blend-mode:screen;
      filter:blur(12px) saturate(140%);
      opacity:0.85;
      z-index:5;
    }
    .aura-core{
      position:absolute;inset:0;border-radius:12px;
      background:
        radial-gradient(circle at 50% 80%, rgba(255,180,80,0.2), rgba(255,110,40,0.1) 30%, rgba(0,0,0,0) 65%),
        radial-gradient(circle at 50% 20%, rgba(255,80,40,0.1), rgba(0,0,0,0) 45%);
      animation: auraPulse 2.5s ease-in-out infinite;
    }
    @keyframes auraPulse {
      0% { transform: scale(0.97); opacity:0.8 }
      50% { transform: scale(1.03); opacity:1 }
      100% { transform: scale(0.97); opacity:0.8 }
    }

    .card-info {
      flex:1;
      padding:0;
      display:flex;
      flex-direction:column;
      background:linear-gradient(180deg, rgba(15,0,20,0.9), rgba(8,0,12,0.95));
      position:relative;
    }
    
    .dropdown-toggle {
      width:100%;
      padding:1rem 1.5rem;
      background:rgba(255,60,60,0.1);
      border:none;
      border-top:1px solid rgba(255,60,60,0.2);
      color:#ff6b6b;
      font-size:1rem;
      font-weight:600;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:space-between;
      transition:all 0.3s ease;
      font-family:'Poppins',sans-serif;
    }
    
    .dropdown-toggle:hover {
      background:rgba(255,60,60,0.2);
    }
    
    .dropdown-toggle .arrow {
      transition:transform 0.3s ease;
      font-size:1.2rem;
    }
    
    .dropdown-toggle.open .arrow {
      transform:rotate(180deg);
    }
    
    .dropdown-content {
      max-height:0;
      overflow:hidden;
      transition:max-height 0.4s ease, padding 0.4s ease;
      padding:0 1.5rem;
      background:rgba(0,0,0,0.4);
    }
    
    .dropdown-content.open {
      max-height:300px;
      padding:1.5rem;
    }
    
    .dropdown-content p {
      color:#ddd;
      font-size:0.9rem;
      line-height:1.6;
      margin-bottom:1rem;
    }
    
    .dropdown-content .register-btn {
      display:inline-block;
      padding:0.8rem 2rem;
      border-radius:30px;
      background:linear-gradient(90deg,#ff4d4d,#ff1a75); 
      color:white; 
      text-decoration:none; 
      font-weight:700; 
      font-size:0.95rem;
      box-shadow: 0 6px 20px rgba(255,20,80,0.4);
      transition:all 0.3s ease;
      width:100%;
      text-align:center;
    }
    
    .dropdown-content .register-btn:hover {
      transform:translateY(-2px);
      box-shadow: 0 10px 28px rgba(255,20,80,0.6);
    }

    .controls { 
      position:absolute;
      top:50%;
      left:0;
      right:0;
      transform:translateY(-50%);
      z-index:60;
      pointer-events:none;
      display:flex;
      justify-content:space-between;
      padding:0 2rem;
    }
    
    .control-btn { 
      pointer-events:auto;
      display:flex; 
      align-items:center; 
      justify-content:center; 
      width:70px;
      height:70px;
      border-radius:50%; 
      background:linear-gradient(135deg, rgba(255,60,60,0.25), rgba(255,20,80,0.15)); 
      color:#fff; 
      border:3px solid rgba(255,60,60,0.5); 
      cursor:pointer;
      font-size:1.8rem;
      transition:all 0.4s cubic-bezier(.2,.9,.2,1);
      backdrop-filter:blur(15px);
      box-shadow: 
        0 8px 32px rgba(255,0,60,0.3),
        inset 0 0 20px rgba(255,255,255,0.05);
      position:relative;
      overflow:hidden;
    }
    
    .control-btn::before {
      content:'',
      position:absolute;
      inset:0;
      border-radius:50%;
      background:radial-gradient(circle, rgba(255,255,255,0.15), transparent 70%);
      opacity:0;
      transition:opacity 0.3s ease;
    }
    
    .control-btn:hover {
      background:linear-gradient(135deg, rgba(255,60,60,0.45), rgba(255,20,80,0.3));
      border-color:rgba(255,60,60,0.8);
      transform:scale(1.15);
      box-shadow: 
        0 12px 48px rgba(255,0,60,0.6),
        inset 0 0 30px rgba(255,255,255,0.1);
    }
    
    .control-btn:hover::before {
      opacity:1;
    }
    
    .control-btn:active {
      transform:scale(1.05);
    }
    
    #prevBtn {
      animation:pulse-left 2s ease-in-out infinite;
    }
    
    #nextBtn {
      animation:pulse-right 2s ease-in-out infinite;
    }
    
    @keyframes pulse-left {
      0%, 100% { transform:translateX(0); }
      50% { transform:translateX(-5px); }
    }
    
    @keyframes pulse-right {
      0%, 100% { transform:translateX(0); }
      50% { transform:translateX(5px); }
    }

    .contact-section {
      z-index:100;
      position:relative;
      padding:3rem 1rem;
      background:linear-gradient(180deg, rgba(10,0,15,0.7), rgba(15,0,20,0.8));
      backdrop-filter:blur(10px);
      border-top:2px solid rgba(255,60,60,0.2);
    }
    .contact-section h2 {
      color:#ff3b3b;
      margin-bottom:2rem;
      font-size:2rem;
      text-align:center;
      text-shadow:0 4px 15px rgba(255,0,60,0.4);
    }
    .contact-card {
      background:rgba(255,255,255,0.06);
      padding:1.5rem;
      border-radius:12px;
      border:1px solid rgba(255,0,60,0.15);
      min-width:240px;
      transition:all 0.3s ease;
    }
    .contact-card:hover {
      background:rgba(255,255,255,0.1);
      border-color:rgba(255,0,60,0.3);
      transform:translateY(-4px);
    }
    .contact-card h3 {
      color:#ff6b6b;
      margin-bottom:0.8rem;
      font-size:1.1rem;
    }
    .contact-card p {
      color:#ddd;
      margin:0.4rem 0;
      font-size:0.95rem;
    }

    footer { 
      text-align:center; 
      padding:2rem 1rem; 
      color:#bbb; 
      z-index:100; 
      position:relative;
      font-size:0.9rem;
      background:rgba(0,0,0,0.5);
    }

    @media (max-width:1024px){
      .carousel{height:620px;max-width:900px}
      .event-card{width:340px;height:560px}
      .poster{height:68%}
      header h1{font-size:2.5rem}
      .control-btn{width:60px;height:60px;font-size:1.5rem}
      .controls{padding:0 1rem}
    }
    @media (max-width:768px){
      .carousel{height:560px}
      .event-card{width:300px;height:500px}
      .poster{height:65%}
      header h1{font-size:2rem}
      header p{font-size:1rem}
      .control-btn{width:55px;height:55px;font-size:1.3rem}
    }
    @media (max-width:480px){
      .carousel{height:500px}
      .event-card{width:280px;height:460px}
      .poster{height:62%}
      header h1{font-size:1.6rem}
      header p{font-size:0.9rem}
      .control-btn{width:50px;height:50px;font-size:1.2rem}
      .controls{padding:0 0.5rem}
    }
  </style>
</head>
<body>

  <header>
    <h1>KRATORQ'2025</h1>
    <p></p>
  </header>

  <main class="scene-wrap">
    <div class="carousel" id="carousel"></div>

    <div class="controls" id="controls">
      <button class="control-btn" id="prevBtn" aria-label="Previous">◀</button>
      <button class="control-btn" id="nextBtn" aria-label="Next">▶</button>
    </div>
  </main>

  <section class="contact-section">
    <div style="max-width:900px;margin:0 auto;text-align:center">
      <h2>For Further Queries</h2>
      <div style="display:flex;gap:1.5rem;flex-wrap:wrap;justify-content:center">
        <div class="contact-card">
          <h3>Student Coordinator</h3>
          <p><strong>Name:</strong> DV Mirnalini</p>
          <p><strong>Phone:</strong> +91 8148115510</p>
        </div>
        <div class="contact-card">
          <h3>Faculty Coordinator</h3>
          <p><strong>Name:</strong> Mr. Gowri Manohar</p>
          <p><strong>Phone:</strong> +91 9849367949</p>
        </div>
      </div>
    </div>
  </section>

  <footer>© 2025 KRATORQ | Designed with ❤</footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

  <script>
  const events = [
    { title: "Paper Presentation", tagline: "Present. Persuade. Inspire.", description: "Showcase your innovative engineering ideas, research, and problem-solving skills to a panel of experts.", image: "Images/4.jpg", formLink: "https://forms.gle/c3hbLbrcjXT13TYq6" },
    { title: "Auto Quiz", tagline: "Rev your brains, not your engines.", description: "Challenge your knowledge of automobiles, engines, and modern mobility.", image: "Images/10.jpg", formLink: "https://forms.gle/74zHrYH3jNyVgNcu8" },
    { title: "Tech MUN", tagline: "Where policy meets innovation.", description: "Step into the shoes of world engineers, leaders, technocrats.", image: "Images/3.jpg", formLink: "https://forms.gle/DXBEwDs91dHJBrAD8" },
    { title: "Pit Stop Challenge", tagline: "Think like an engineer, act like a racer.", description: "Ideate and design F1-inspired concepts.", image: "Images/1.jpg", formLink: "https://forms.gle/eCn8NrjFgqjExXpSA" },
    { title: "Treasure Hunt", tagline: "Decode. Discover. Dominate.", description: "Follow the clues, crack the codes, and race across campus.", image: "Images/8.jpg", formLink: "https://forms.gle/uAywoEBSUDKLL5kU9" },
    { title: "F1 Logo Design", tagline: "Design the symbol of speed.", description: "Showcase your creativity by crafting a dynamic F1-inspired logo.", image: "Images/2.jpg", formLink: "https://forms.gle/yayPpaXHeXvjQPJr8" }
  ];

  const imageCache = new Map();
  
  const imageLoadPromises = events.map(ev => {
    return new Promise((resolve) => {
      const img = new Image();
      img.crossOrigin = 'anonymous';
      img.onload = () => {
        imageCache.set(ev.image, img);
        resolve(true);
      };
      img.onerror = () => {
        imageCache.set(ev.image, null);
        resolve(false);
      };
      img.src = ev.image;
    });
  });

  const carousel = document.getElementById('carousel');
  const cards = [];
  const radius = 580;
  const baseAngle = 360 / Math.max(events.length,1);
  let activeIndex = 0;
  let autoplayTimer = null;
  const AUTOPLAY_INTERVAL = 5500;

  function svgPlaceholder(title, w=900, h=630){
    const escaped = title.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
    const svg = <svg xmlns="http://www.w3.org/2000/svg" width="${w}" height="${h}"><defs><linearGradient id="g" x1="0" x2="1" y1="0" y2="1"><stop offset="0" stop-color="#0b0710"/><stop offset="1" stop-color="#15081a"/></linearGradient></defs><rect width="100%" height="100%" fill="url(#g)"/><text x="50%" y="45%" fill="#ff6b6b" font-family="Poppins, sans-serif" font-size="32" font-weight="700" text-anchor="middle" dominant-baseline="middle">${escaped}</text><text x="50%" y="58%" fill="#ffd5d8" font-family="Poppins, sans-serif" font-size="16" text-anchor="middle" dominant-baseline="middle">Loading...</text></svg>;
    return 'data:image/svg+xml;utf8,' + encodeURIComponent(svg);
  }

  events.forEach((ev, idx) => {
    const c = document.createElement('div'); 
    c.className = 'event-card'; 
    c.dataset.index = idx;
    
    const inner = document.createElement('div'); 
    inner.className = 'card-inner';
    
    const front = document.createElement('div'); 
    front.className = 'card-face card-front';
    
    const poster = document.createElement('div'); 
    poster.className = 'poster';
    
    const img = document.createElement('img'); 
    img.alt = ev.title;
    img.dataset.imagePath = ev.image;
    
    const titleOverlay = document.createElement('div'); 
    titleOverlay.className = 'poster-title';
    titleOverlay.textContent = ev.title;

    const aura = document.createElement('div'); 
    aura.className = 'flame-aura';
    const auraCore = document.createElement('div'); 
    auraCore.className = 'aura-core';
    aura.appendChild(auraCore);

    poster.appendChild(img);
    poster.appendChild(aura);
    poster.appendChild(titleOverlay);
    
    poster.addEventListener('click', (e) => {
      e.stopPropagation();
      window.open(ev.formLink, '_blank');
    });
    
    front.appendChild(poster);
    
    const cardInfo = document.createElement('div');
    cardInfo.className = 'card-info';
    
    const dropdownToggle = document.createElement('button');
    dropdownToggle.className = 'dropdown-toggle';
    dropdownToggle.innerHTML = <span>${ev.tagline}</span><span class="arrow">▼</span>;
    
    const dropdownContent = document.createElement('div');
    dropdownContent.className = 'dropdown-content';
    
    const desc = document.createElement('p');
    desc.textContent = ev.description;
    
    const regBtn = document.createElement('a');
    regBtn.className = 'register-btn';
    regBtn.href = ev.formLink;
    regBtn.target = '_blank';
    regBtn.textContent = 'Register Now';
    
    dropdownContent.appendChild(desc);
    dropdownContent.appendChild(regBtn);
    
    dropdownToggle.addEventListener('click', (e) => {
      e.stopPropagation();
      dropdownToggle.classList.toggle('open');
      dropdownContent.classList.toggle('open');
    });
    
    cardInfo.appendChild(dropdownToggle);
    cardInfo.appendChild(dropdownContent);
    front.appendChild(cardInfo);

    inner.appendChild(front);
    c.appendChild(inner);
    carousel.appendChild(c);

    c.addEventListener('click', () => {
      if (!c.classList.contains('active')) {
        focusToIndex(idx, true);
      }
    });

    cards.push({ root: c, img, poster, idx, imagePath: ev.image, dropdownToggle, dropdownContent });
  });

  Promise.all(imageLoadPromises).then(() => {
    cards.forEach(obj => {
      const cached = imageCache.get(obj.imagePath);
      if (cached) {
        obj.img.src = cached.src;
        setTimeout(() => {
          obj.img.classList.add('loaded');
        }, 50);
      } else {
        obj.img.src = svgPlaceholder(events[obj.idx].title, 900, 630);
        obj.img.style.objectFit = 'contain';
        obj.img.classList.add('loaded');
      }
    });
  });

  function layoutCards(rotationDeg = 0){
    cards.forEach((obj, i) => {
      const c = obj.root;
      const angleDeg = (i * baseAngle) + rotationDeg;
      const rad = angleDeg * Math.PI / 180;
      const x = Math.sin(rad) * radius;
      const z = Math.cos(rad) * radius;
      
      const isActive = (i === activeIndex);
      const scale = isActive ? 1.05 : 0.88;
      const finalTransform = translateX(${x}px) translateZ(${z}px) scale(${scale});
      
      gsap.to(c, {
        duration: 0.85, 
        ease: "expo.out",
        onUpdate() {
          c.style.transform = finalTransform;
        }
      });
      
      c.classList.toggle('active', isActive);
      
      if (!isActive) {
        obj.dropdownToggle.classList.remove('open');
        obj.dropdownContent.classList.remove('open');
      }
    });
  }

  function focusToIndex(idx, userTriggered=false){
    activeIndex = ((idx % cards.length) + cards.length) % cards.length;
    layoutCards(-activeIndex * baseAngle);
    const activeCard = cards[activeIndex];
    
    gsap.fromTo(activeCard.root, 
      { y: 15 }, 
      { y: 0, duration: 0.8, ease: "elastic.out(1,0.7)" }
    );
    
    setTimeout(() => {
      if(activeCard.img.complete && activeCard.img.naturalHeight > 0){
        activeCard.img.classList.add('loaded');
      }
      
      gsap.to(activeCard.img, { 
        opacity: 1, 
        duration: 0.6, 
        ease: "power2.out"
      });
    }, 100);
    
    if (userTriggered) {
      restartAutoplay();
    }
  }

  function goNext(userTriggered=false){ focusToIndex(activeIndex + 1, userTriggered); }
  function goPrev(userTriggered=false){ focusToIndex(activeIndex - 1, userTriggered); }

  document.getElementById('nextBtn').addEventListener('click', ()=> goNext(true));
  document.getElementById('prevBtn').addEventListener('click', ()=> goPrev(true));
  document.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowRight') goNext(true);
    if (e.key === 'ArrowLeft') goPrev(true);
  });

  carousel.addEventListener('mouseenter', ()=> stopAutoplay());
  carousel.addEventListener('mouseleave', ()=> startAutoplay());

  function startAutoplay(){ stopAutoplay(); autoplayTimer = setInterval(()=> goNext(false), AUTOPLAY_INTERVAL); }
  function stopAutoplay(){ if (autoplayTimer) { clearInterval(autoplayTimer); autoplayTimer = null; } }
  function restartAutoplay(){ stopAutoplay(); startAutoplay(); }
  
  Promise.all(imageLoadPromises).then(() => {
    setTimeout(()=> {
      focusToIndex(0);
      startAutoplay();
    }, 250);
  });

  document.addEventListener('visibilitychange', ()=> {
    if (document.hidden) stopAutoplay(); else startAutoplay();
  });

  window.focusToIndex = focusToIndex;
  </script>
</body>
</html>